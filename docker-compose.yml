services:
  bind9:
    container_name: rodriguezzzserver
    image: internetsystemsconsortium/bind9:9.18
    platform: linux/amd64
    ports:
      - 55:53/tcp
      - 55:53/udp
    networks:
      rodriguezzz_subnet:
        ipv4_address: 172.29.6.1
    volumes:
      - ./conf:/etc/bind
      - ./zonas:/var/lib/bind
    restart: always
  cliente:
    container_name: cliente2
    image: alpine
    platform: linux/amd64
    tty: true
    stdin_open: true
    # configuramos para que el cliente use nuestro dns
    dns:
      - 172.29.6.1
    networks:
      rodriguezzz_subnet:
        ipv4_address: 172.29.6.2
        
networks:
  rodriguezzz_subnet:
    driver: bridge
    ipam:
      config:
        - subnet: 172.29.0.0/16
          ip_range: 172.29.6.0/24
          gateway: 172.29.6.254